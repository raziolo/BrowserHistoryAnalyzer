{% load static %}
<!DOCTYPE html>
<html lang="en" data-theme="light"> {# Default theme set here #}
<head>
    <meta charset="UTF-8">
    <title>{% block title %}{% endblock %} | Backup Dashboard</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    {# Tailwind and DaisyUI CSS #}
    <link href="https://cdn.jsdelivr.net/npm/daisyui@4.10.2/dist/full.min.css" rel="stylesheet" type="text/css" />
    <script src="https://cdn.tailwindcss.com"></script> {# Use Tailwind CDN for simplicity #}

    {# Keep Font Awesome if needed, or switch to Heroicons/other #}
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    {# Keep Bootstrap Icons if you are still using them #}
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <script src="https://unpkg.com/htmx.org@1.9.2"></script>


    <style>
        /* Basic layout styling */
        body { display: flex; min-height: 100vh; }
        .sidebar { width: 250px; flex-shrink: 0; }
        .main-content { flex-grow: 1; overflow-x: hidden; }
        /* Add custom scrollbar styles if needed */
        .scrollable-list { max-height: 300px; /* Adjust as needed */ overflow-y: auto; }
        /* Simple scrollbar styling (optional) */
        .scrollable-list::-webkit-scrollbar { width: 6px; }
        .scrollable-list::-webkit-scrollbar-track { background: transparent; }
        .scrollable-list::-webkit-scrollbar-thumb { background-color: rgba(0, 0, 0, 0.2); border-radius: 3px; }
        html[data-theme="dark"] .scrollable-list::-webkit-scrollbar-thumb { background-color: rgba(255, 255, 255, 0.2); }
    </style>
    {% block extra_css %}{% endblock %}
</head>
<body class="bg-base-200"> {# Use DaisyUI background color #}

    {% include 'components/toast.html' %}

    <nav class="sidebar bg-base-100 p-4 shadow-lg">
        <div class="flex flex-col h-full">
            <h3 class="text-xl font-bold mb-6">ðŸ”’ Backup System</h3>
            <ul class="menu p-0 mb-auto"> {# DaisyUI Menu #}
                <li>
                    <a href="{% url 'home' %}" {% if request.resolver_match.url_name == 'home' %}class="active"{% endif %}>
                       <i class="bi bi-house-door-fill w-4 h-4"></i> Dashboard
                    </a>
                </li>
                <li>
                    <a href="{% url 'classification' %}" {% if request.resolver_match.url_name == 'other_page' %}class="active"{% endif %}>
                       <i class="bi bi-search w-4 h-4"></i> Classification
                    </a>
                </li>
                <li>
                    <a href="{% url 'history_list' %}" {% if request.resolver_match.url_name == 'other_page' %}class="active"{% endif %}>
                       <i class='bi bi-book'></i> History
                    </a>
                </li>
                <li>
                    <a href="{% url 'settings' %}" {% if request.resolver_match.url_name == 'other_page' %}class="active"{% endif %}>
                       <i class="bi bi-gear-fill w-4 h-4"></i> Settings
                    </a>
                </li>
            </ul>

            <div class="mt-auto space-y-2">
                <button id="themeToggle" class="btn btn-outline btn-sm w-full">
                    ðŸŒ“ Toggle Theme
                </button>
                <div class="text-base-content/60 text-xs text-center">
                    Version 1.0.0
                </div>
            </div>
        </div>
    </nav>

    <main class="main-content p-4 md:p-6 lg:p-8">
        {% block content %}{% endblock %}
    </main>

    {# DaisyUI doesn't strictly require JS bundle like Bootstrap, but you might need JS for interactive components later #}
    {# Popper.js might still be needed if you use complex dropdowns/tooltips from JS libraries #}
    {# <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script> #}

    <script>
        // Theme handling for DaisyUI
        function setTheme(theme) {
            document.documentElement.setAttribute('data-theme', theme); // Set theme on <html>
            localStorage.setItem('theme', theme); // Use localStorage instead of cookies
            const toggleButton = document.getElementById('themeToggle');
            if (toggleButton) {
                 toggleButton.innerHTML = theme === 'dark' ? '<i class="bi bi-sun-fill mr-1"></i> Light Mode' : '<i class="bi bi-moon-fill mr-1"></i> Dark Mode';
            }
        }

        // Initial load
        // Prefers system theme if available and no explicit choice is stored
        const storedTheme = localStorage.getItem('theme');
        const defaultTheme = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
        const initialTheme = storedTheme || defaultTheme;
        setTheme(initialTheme);


        // Toggle handler
        const themeToggleButton = document.getElementById('themeToggle');
        if (themeToggleButton) {
            themeToggleButton.addEventListener('click', () => {
                const currentTheme = document.documentElement.getAttribute('data-theme');
                const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
                setTheme(newTheme);
            });
        }

        // Initialize DaisyUI Tooltips (CSS-only, no JS needed)
        // Initialize DaisyUI Modals/Drawers etc. if used (might need specific JS)

    </script>
    {% block extra_js %}{% endblock %}
</body>
</html>